---
layout: docs
page_title: Credential management
description: |-
  An overview of credential management in Boundary
---

# Credential management

When users try to connect to a remote machine, they typically need a set of credentials for authentication.
Additionally, after they connect to the desired machine, they may require an extra set of credentials to access various services, or other machines within the network.

There are two credential management paradigms in Boundary, credential brokering and credential injection.

## Credential brokering

Credential brokering is the process by which credentials are fetched from a credential store, and then returned back to the user.
The user must already be authorized to connect to a target to have credentials for that specific target brokered back to them.
Credentials are brokered at session establishment time.
The process works as follows:

1. The user authenticates to Boundary using either the CLI or desktop app.
1. The user requests a connection to the target.

   The controller fetches credentials from the credential store, and passes the credentials to the user.
1. The user establishes a connection to the session.

    The controller assigns the job to a worker, and the worker establishes a session to the target.
1. The user enters the credentials.

    The user is authenticated to the target.

Brokered credentials can be attached to either TCP targets or SSH targets.
Brokered credentials could take the form of a token, username and password, SSH private key, certificate, JSON blob, or an unstructured secret stored in Vault, for example.

### Security considerations

Consider a scenario in which user A wants to access a target using SSH.

![Credential brokering](/img/credential-brokering-1.png)

In this scenario, the user must be authorized to access the target.
If they are authorized, they have the ability to authenticate themselves to the machine using credentials that were brokered, or returned, back to them.
If the user is not authorized to access the target, the user will not be able to retrieve brokered credentials for that target.

![Credential brokering](/img/credential-brokering-2.gif)

If a user wants to abstract the authentication process using brokered credentials, they can use the `boundary connect` ssh-style command, and pass credentials to sshpass, putty, etc.
In this scenario, while the brokered credential may not be visibly show to the user, the user still interacts with the brokered credentials to perform authentication.

![Credential brokering](/img/credential-brokering-3.gif)

Additionally, with Vault's dynamic secrets engine, an administrator could configure their environment such that secreets are essentially one-time passwords, as the credentials will be revoked after the session is terminated.

Learn more about [credential brokering](/boundary/tutorials/hcp-getting-started/hcp-getting-started-credentials).

Learn more about the [Vault dynamic secrets engine](/vault/docs/secrets).

## Credential injection <sup>HCP only</sup>

Credential injectiion is the process by which a credential is fetched from a credential store and then passed on to a worker for authentication to a remote machine.
With credential injection, the user never sees the credential required to authenticate to the target.
This provides a passwordless experience for the user, as the worker does both session establishment and authentication to the target on behalf of the user.
This differs from credential brokering, where credentials are returned to the user rather than injected into the session on worker nodes.

The steps are as follows:

1. The user authenticates to Boundary.
1. The user requests a connection to a target.

    The controller fetches credentials from the credential store.
1. The user establishes a connection to the session.

    The controller assigns the job to a worker, and the worker establishes a session to the target.
    Then the controller passes credentials to the worker.
    The worker authenticates to the target, and the user is then authenticated to the target.

Credential injection is available for the SSH target type, allowing users to inject the following credentials when accessing systems via SSH:

- SSH certificates
- Usernames and passwords
- Usernames and public keys

### Security considerations

Consider a scenario where a user wants to access a target using SSH.

![Credential injection](/img/credential-injection-1.png)

In this scenario, the user must be authorized to access the target.
If they are authorized, they have the ability to connect to the worker.
Upon connecting to the worker, the worker attempts to establish a remote session to the target, and attempt authentication on behalf of the user.

![Credential injection](/img/Cred_Injection.gif)

If the user is not authorized to access the target, the user will not be able to have credentials injected on their behalf to that target, nor have credentials brokered back to them.

Learn more about [credential injection](/boundary/tutorials/hcp-administration/hcp-ssh-cred-injection).