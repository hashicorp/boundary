---
layout: docs
page_title: API list pagination
description: Learn how the API pagination and cache works in Boundary to prevent system resources from being overwhlemed, and to help you find resources.
---

# API list pagination

Boundary uses an API pagination feature to support searching and filtering large lists of results without overwhelming your system's resources.

When you perform a `list` operation, the API request returns the first 1000 results, by default.
You can configure a different number using the `max_page_size` parameter.
When you reach the end of the initial list, you can request the next page of results by repeating the `list` command with a token.

The results of the operation are cached locally, to help reduce cost and protect your system resources.
You can refresh the local list for up to 30 days before you must perform a new `list` operation.

Note that users can only see items that they have permissions to see in the list of results.

## Initial pagination

By default, after the initial `list` operation, query results are sorted in descending order by creation time and public ID.
Boundary also returns the top-level fields `response_type` and `list_token`.
If the `response_type` is `delta`, it means there are more items available in the list.
If the `response_type` is `complete`, it means the list is complete.

To request the next page of results, run the `list` operation again and provide the `list_token` as a parameter.
Boundary returns the next page of results with new `response_type` and `list_token` values.
You can continue viewing new pages of results until the `response_type` reads `complete`.

## Refresh

When the `response_type` reads `complete`, you have paged through all the results that were available when you ran the initial `list` operation.
You can now refresh the cached list results to return any targets that were updated since you started paginating the list responses.

To refresh the list results, make another `list` request using the `list_token` from the previous response.
Boundary returns a `response_type` as part of the response, similarly to when you ran the intial operation.
If the `response_type` is `delta`, it means there are more items available in the list.
If the `response_type` is `complete`, it means the list is complete.

To request the next page of results, run the `list` operation again and provide the `list_token` as a parameter.
Boundary returns the next page of results with new `response_type` and `list_token` values.
You can continue viewing new pages of results until the `response_type` reads `complete`.

Boundary also includes the top-level response `deleted_ids` as part of the refresh operation.
The `deleted_ids` response contains the IDs of any targets that were deleted since you started the pagination process.
Deleted resources are included in the results of the list for 30 days after they are deleted.
Resources that have been deleted include the suffix `_deleted`.

You can refresh the local results of your initial `list` operation as many times as you want for up to 30 days.
Maintaining a local cache of results for a frequently used `list` operation can help to reduce server cost.
After 30 days, the `list_token` expires and you must make a new `list` request without the token to regenerate the full list of results.

In scenarios where updates are so frequent that the results may change while the refresh operation runs, those updates may not appear at all in the refreshed list.
If you make frequent updates to a resource, or if you are updating data while you run a `list` operation, HashiCorp recommends that you generate the full list of results instead of performing a refresh.

Workers are not included in refresh operations because the updates they send to the controller are too frequent to be captured in a refresh.
To update a list of worker resources, you must regenerate the full list of results.

## Response structure

All `list` endpoints support the following parameters:

- `list_token` (optional) - An opaque token that is returned from the previous `list` response.
If you do not supply a value, pagination starts from the beginning.
- `page_size` (optional) - An unsigned integer that indicates the number of items that should be included on the page of search results.
If you do not provide a value, or if you provide a value of `0`, Boundary uses the default page size of 1000 items.
If you configure it, the `page_size` value overrides the default page size.
Controller administrators can also configure a `max_page_size` option that constrains the maximum page size a user can request.

Boundary returns the following response parameters:

- `response_type` - Defines whether the response is a `delta` or `complete` listing.
The value will be `delta` until the last page is returned, at which point it will be `complete`.
- `list_token` - An opaque token which is included in subsequent listing requests after the initial one, so that the client can continue to paginate the results.
- `sort_by` - The column name that the returned items should be sorted on.
Each list endpoint has one defined column which defines the sorting for all returned items.
This attribute is included in the response, so that the sort order for each endpoint is explicit.
- `sort_dir` - The direction in which the returned items are sorted.
Responses can include `desc` for descending, or `asc` for ascending.
- `items` - The list of items.
The items represent replacements for any existing items with matching IDs in the client's cache.
- `est_item_count` - An unsigned integer that indicates the total number of items that are available in the list of results.
This number may be an estimate, since the number of items may change during the pagination process.

### Example response

```json
{
  "response_type": "<delta|complete>",
  "pagination_token": "<opaque-token>",
  "sort_by": "created_time",
  "sort_dir": "desc",
  "est_item_count": 1000,
  "items": [
    {
      "id": "ttcp_1234567890",
      "scope_id": "p_1234567890"
    },
    {
      "id": "ttcp_2234567890",
      "scope_id": "p_1234567890"
    }
  ]
}
```

## List tokens

List tokens contain general metadata associated with the ongoing pagination and either a pagination or refresh token part, depending on the phase of the pagination.
If you compose an invalid token, you will receive an invalid token error.

When you make a `list` request without a `list_token`, Boundary builds a page of items that contains all of the resources currently available, subject to the page size, with the following attributes:

- Must contain a `response_type` equal to `delta` or `complete`
- Must contain a `sort_by`
- Must contain a `sort_dir`
- May contain a `list_token`
- May contain `items`
- May contain `est_item_count`

When you make a `list` request using a valid `list_token`, Boundary builds a page of items following from the page returned with the token:

- Must contain a `response_type` equal to `delta` or `complete`
- Must contain a `sort_by`
- Must contain a `sort_dir`
- Must contain a `list_token`
- May contain `items`
- May contain `est_item_count`

If you make a `list` request using a token that has a `create_time` older than 30 days, Boundary treats it as an invalid token and returns an error.

## Backward compatibility

List pagination was introduced in Boundary version 0.15.0.
Since pagination is mandatory, in the case where the total number of items is larger than the default or configured page size, you must implement pagination to get the full result set.