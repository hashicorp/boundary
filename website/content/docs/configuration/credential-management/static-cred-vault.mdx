---
layout: docs
page_title: Manage static credential with Vault
description: |-
  How to configure static credentials with Vault credential store 
---

# Manage static credentials with Vault


## Create a Vault credential store
The following sections will provide steps to configure static credentials using the Vault credential store. There will also be steps to associate targets with credentials for two different end-user workflows: credential brokering and credential injection.


### Requirements
1. You must have a Vault instance available with an address or URL that is reachable from your Boundary instance. This will be used to connect Boundary to Vault.
2. You must have static credentials stored in Vault’s key/value secrets engine. Examples of static credential types include username & password or username & SSH private key.
3. You must have a Vault token for Boundary to authenticate and access your static credentials. 

<Tabs>
<Tab heading="UI" group="ui"> 

1. Log in to Boundary.
2. Select **Orgs** on the navigation pane.
3. Select your desired org.
4. Select your desired project for which your static credential store should belong.
5. Click **Credential Stores** on the navigation pane.
6. Click **New Credential Store**.
7. Provide a name for your credential store and select type Vault.
8. Complete the fields related to your Vault instance.
    - **Address** - The address of your Vault instance.
    - **Worker Filter** (optional) - If your Vault instance does not have a publicly accessible address and instead is proxied through a Boundary worker, enter the worker filter. This should be a boolean expression. See examples in the Worker tags documentation.       
    - **Token** - Token provided by Vault that provides access to the static credentials within your Vault instance.  
    - **Namespace** (optional) - Vault namespace. Requires Vault Enterprise.
    - **TLS Server Name** (optional) - Name to use as the SNI host if connecting to Vault via TLS.
    - **Client Certificate** (optional) - A PEM-encoded client certificate to use for TLS authentication to the Vault server.
    - **Client Certificate key** (optional) - A PEM-encoded private key matching the client certificate from client certificate.
    - **CA Certificate** (optional) - A PEM-encoded CA certificate to verify the Vault server's TLS certificate.

9. Click **Save**. You now have a static credential store where you can store static credentials.
10. In your newly created Vault credential store, click on the **Credential Libraries** tab.
11. Click **Manage** and select **New Credential Library** in the pull down menu. 
12. Complete the fields related to the static credentials stored in your Vault instance.
    - **Name** (optional) -  The name is optional, but if you enter a name, it must be unique within the parent credential store.
    - **Type** - Select **Generic Secrets**.
    - **Vault Path** - Enter the path for the location of your static credentials stored in Vault. Boundary uses this field to locate the static credentials inside Vault. 
    - **Credential Type** - Select the appropriate credential type that matches the static credential stored in Vault.
    - **HTTP Method** - Select **GET**.
13. Click **Save**.

</Tab>

<Tab heading="CLI" group="cli"> 

1. Set environment variables for your Boundary project ID. 
  ```
  $ export PROJECT_ID=<your_project_ID>
  ```

2. Log into Boundary.
  ```
  $ boundary authenticate
  Please enter the login name (it will be hidden):
  Please enter the password (it will be hidden):  
  ```

3. Create a credential store providing the desired name and your project’s ID. 
  ```
  $ boundary credential-stores create vault \
      -scope-id $PROJECT_ID \
      -name "my-vault-credential-store"
  ```
4. Copy the ID of the new static credential store and export it as the CRED_STORE_ID environment variable.
  ```
  $ export CRED_STORE_ID=<actual-cred-store-id>
  ```

5. Create a credential library.

  **For type username & password:**
  ```
  $ boundary credential-libraries create vault-generic \
      -name <your_preferred_credential_library_name> \
      -credential-store-id $CRED_STORE_ID \
      -credential-type username_password \
      -vault-path "<vault_path_to_your_static_credentials>"
  ```
  **For type username & private key:**
  ```
  $ boundary credential-libraries create vault-generic \
      -name <your_preferred_credential_library_name> \
      -credential-store-id $CRED_STORE_ID \
      -credential-type ssh_private_key  \
      -vault-path "<vault_path_to_your_static_credentials>"
  ```

</Tab>

</Tabs>

## Determine end user workflows

End users can experience three workflows when connecting to a target. In the first workflow, when an end user connects to a target, Boundary will initiate the session but the end user must know the credentials to authenticate into the session. This workflow is available for testing purposes and is not recommended because it places the burden on the users to securely store and manage credentials.

The second workflow uses a feature called credential brokering, where credentials are retrieved from a credentials store and returned back to the end user. The end user would then enter the credentials into the session when prompted by the target. This workflow is more secure than the first workflow since credentials are centrally managed through Boundary. For more information, see [credential brokering](/boundary/docs/concepts/credential-management#credential-brokering) concepts page. 

The third workflow uses a featured all credential injection, where credentials are retrieved from a credential store and injected directly into the session on behalf of the end user. This workflow is the most secure because credentials are not exposed to the end user, reducing the chances of a leaked credential. This workflow is also more streamlined as the user goes through a passwordless experience.  For more information, see [credential injection](/boundary/docs/concepts/credential-management#credential-injection) concepts page. 

### Configure targets with credential brokering 

The following section provides steps to configure your targets with credential brokering.

### Requirements

- You must have an existing target available. 
- You must have a Vault credential store and credential library. Refer to [Create Vault credential stores](/boundary/docs/configuration/credential-management/static-cred-vault#create-a-vault-credential-store) page for procedures.
- You must have a static credential saved in the Vault. The static credential must correspond to the target to which you wish to authenticate.

<Tabs>

<Tab heading="UI" group="ui"> 

1. Log in to Boundary.
2. Select **Orgs** on the navigation pane.
3. Select your desired org.
4. Select the project where your target resides.
5. Click **Targets** on the navigation pane.
6. Click on your target for which you wish to configure credential brokering.
7. Click on the **Brokered Credential** tab.
8. Click **Managed** and select **Add Brokered Credential** in the pull down menu.
9. Select the appropriate credential library that corresponds to your target and click **Add Brokered Credentials**.

</Tab>

<Tab heading="CLI" group="cli"> 

1. Log into Boundary.
  ```
  $ boundary authenticate
  Please enter the login name (it will be hidden):
  Please enter the password (it will be hidden):
  ```
2. Add brokered credentials to target. 
  ```
  boundary targets add-credential-sources \
    -id <target_ID_of_your_desired_target> \
    -brokered-credential-source <ID_of_your_credential_library>
  ```

> **_NOTE:_** The ```brokered-credential-source``` refers to the ID of the credential library in your Vault credential store.


</Tab>

</Tabs>



### Configure targets with credential injection
<EnterpriseAlert product="boundary">This feature requires <a href="https://www.hashicorp.com/products/boundary">HCP Boundary or Boundary Enterprise</a></EnterpriseAlert>

The following section provides steps to configure your targets with credential injection which will provide end users with a passwordless experience when connecting to a target.

### Requirements
- You must have an existing target available.
- You must have a Vault credential store and credential library. Refer to [Create Vault credential stores](/boundary/docs/configuration/credential-management/static-cred-vault#create-a-vault-credential-store) page for procedures.
- You must have a static credential saved in the Vault. The static credential must correspond to the target to which you wish to authenticate.

<Tabs>

<Tab heading="UI" group="ui"> 

1. Log in to Boundary.
2. Select **Orgs** on the navigation pane.
3. Select your desired org.
4. Select the project where your target resides.
5. Click **Targets** on the navigation pane.
6. Click on your target for which you wish to configure credential injection.
7. Click on the **Injected Application Credential** tab.
8. Click **Managed** and select **Add Injected Application Credential** in the pull down menu.
9. Select the appropriate credential library that corresponds to your target and click **Add Injected Application Credentials**.

</Tab>

<Tab heading="CLI" group="cli"> 

1. Log into Boundary.
  ```
  $ boundary authenticate
  Please enter the login name (it will be hidden):
  Please enter the password (it will be hidden):
  ```
2. Add credential injection to target. 
  ```
  boundary targets add-credential-sources \
    -id <target_ID_of_your_desired_target> \
    -injected-application-credential-source <ID_of_your_credential_library>
  ```

> **_NOTE:_** The ```injected-application-credential-source``` refers to the ID of the credential library in your Vault credential store.


</Tab>

</Tabs>

