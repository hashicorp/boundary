# RDP credential injection compatibility

> **⚠️ BETA FEATURE**
> 
> RDP credential injection is currently in **beta** as of Boundary release 0.20. This feature is under active development and testing. 
> 
> **Important considerations:**
> - The compatibility matrix below reflects currently tested configurations
> - Additional client/target combinations are being validated and will be added regularly
> - Some functionality may change before general availability
> - Please report any issues or untested combinations through [official support channels](https://support.hashicorp.com)
> 
> This documentation will be updated frequently as new combinations are tested and validated.

# Overview
When users connect to RDP-type targets, Boundary automatically injects credentials into the session on their behalf, enhancing security and simplifying the user experience.

## Compatibility overview

Boundary supports RDP credential injection using various authentication methods, which are mechanisms that verify user identity when connecting to Windows servers.

As of 0.20, Boundary supports two authentication methods for RDP targets:

1. **Kerberos authentication** - Used for domain-joined Windows servers
2. **NTLMv2 authentication** - Used for standalone Windows servers or as a fallback mechanism when Kerberos is unavailable.

Kerberos authentication requires the target address to match the server's domain name (for example, `server.example.com`). NTLMv2 authentication can use either domain names or IP addresses. Boundary automatically attempts Kerberos first and falls back to NTLMv2 when necessary.

Boundary workers handle the credential injection process transparently. This workflow is referred to as **credential injection**. Boundary retrieves credentials from credential stores and injects them directly into the RDP session on behalf of the user. This workflow is the most secure because credentials are never exposed to the end user, providing a passwordless experience.

## Known limitations

Current known issues that may affect RDP connections:
- Transparent sessions do not work with RDP
- Closing the RDP client doesn't always properly terminate the Boundary session
- Intermittent connection failures may occur with Kerberos authentication
- Some Kerberos authentication events may not be properly logged

Boundary engineering is closely tracking these issues and will fix in subsequent patch releases.

## Configuration requirements

### Certificate handling

Boundary generates self-signed certificates for each RDP target. When users first connect to a target, they must manually accept the certificate. This is a one-time action per target for most clients, though behavior varies:

- **Windows clients** remember certificates across sessions
- **macOS clients** require accepting certificates per alias or endpoint
- **Custom listen addresses** generate certificate mismatch warnings

Future releases may support enterprise certificate authorities for trusted certificates.

### Connection limits

The Windows Remote Desktop Connection application consumes multiple connections when initiating a session. When configuring connection limits:

- Do not set connection limit to 1 for RDP targets as this will cause RDP connections to fail
- Plan for multiple connections per RDP session
- Account for higher connection usage compared to other protocols

### Network configuration

RDP credential injection has specific network requirements:

- Standard RDP port is 3389 (configurable for non-standard ports)
- Port 127.0.0.1:3389 is blocked on Windows (use alternative addresses)
- UDP transport is disabled
- Server redirection is not supported
- Maximum TLS version is 1.2 (TLS 1.3 is incompatible with Windows Server 2025)

### Client behavior

Different RDP clients exhibit unique behaviors:

**Windows Remote Desktop Connection:**
- Does not prompt for credentials when Boundary injects them

**macOS Microsoft Remote Desktop:**
- Prompts for credentials that are ignored (Boundary injects the stored credential regardless)
- Requires manual certificate acceptance per endpoint

## Compatibility status

The following tables show tested combinations of Windows Server versions, client operating systems, and authentication methods.

### Windows Server 2025

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | Pending | ✅ | Pending |
| Windows 10 | ✅ | Pending | Pending |
| macOS 15 | Pending | Pending | Pending |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

### Windows Server 2022

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | ✅ | ✅ | ✅ |
| Windows 10 | ✅ | ✅ | ✅ |
| macOS 15 | Pending | ✅ | ✅ |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

### Windows Server 2019

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | ✅ | ✅ | ✅ |
| Windows 10 | ✅ | ✅ | ✅ |
| macOS 15 | ✅ | ✅ | ✅ |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

### Windows Server 2016

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | Pending | ✅ | ✅ |
| Windows 10 | ✅ | ✅ | Pending |
| macOS 15 | ✅ | ✅ | ✅ |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

