# RDP credential injection compatibility

> **⚠️ BETA FEATURE**
> 
> RDP credential injection is currently in **beta** as of Boundary release 0.20. This feature is under active development and testing.
> 
> **Important considerations:**
> - The compatibility matrix below reflects currently tested configurations.
> - Additional client/target combinations are being validated and will be added regularly.
> - Some functionality may change before general availability.
> - Please report any issues or untested combinations through [official support channels](https://support.hashicorp.com).
> 
> This documentation will be updated frequently as new combinations are tested and validated.

> **Key Takeaways for RDP Credential Injection (Beta)**
>
> * **Supported Authentication:** Only **Kerberos** and **NTLMv2** are supported.
> * **Unsupported Authentication:** Microsoft Entra ID, passwordless methods (Windows Hello, FIDO2), and Smart Cards are **not** supported.
> * **Initial Connection:** Users must manually accept a self-signed certificate on their first connection to a target.
> * **Critical Configuration:** The `connection limit` for RDP targets **must not** be set to `1`. A setting of 2 or higher is required.

## How Credential Injection Works

When users connect to RDP targets, Boundary can automatically inject credentials, preventing exposure to the end-user. This is the most secure workflow, providing a passwordless experience within the supported authentication frameworks.

### Supported Authentication Methods

As of Boundary 0.20, we **only** support the following traditional authentication methods for RDP targets:

1.  **Kerberos authentication** - The primary method for domain-joined Windows servers.
2.  **NTLMv2 authentication** - Used for standalone servers or as a fallback.

> **Important: Unsupported Methods**
> Modern and cloud-based authentication methods are **not supported** at this time. This includes, but is not limited to:
> - Microsoft Entra ID (formerly Azure Active Directory)
> - Passwordless methods (Windows Hello, FIDO2 keys)
> - Certificate-based authentication (including Smart Cards)

Kerberos authentication requires the target address to match the server's domain name (for example, `server.example.com`). NTLMv2 authentication can use either domain names or IP addresses. Boundary automatically attempts Kerberos first and falls back to NTLMv2 if necessary.

## Known Limitations

Current known issues that may affect RDP connections:
- Transparent sessions do not work with RDP.
- Closing the RDP client doesn't always properly terminate the Boundary session.
- Intermittent connection failures may occur with Kerberos authentication.
- Some Kerberos authentication events may not be properly logged.

Boundary engineering is closely tracking these issues and will fix them in subsequent patch releases.

## Configuration Requirements

### Certificate handling

Boundary generates self-signed certificates for each RDP target. When users first connect to a target, they must manually accept the certificate. This is a one-time action per target for most clients, though behavior varies:

- **Windows clients** remember certificates across sessions.
- **macOS clients** require accepting certificates per alias or endpoint.
- **Custom listen addresses** generate certificate mismatch warnings.

Future releases may support enterprise certificate authorities for trusted certificates.

### Connection limits

The Windows Remote Desktop Connection application consumes multiple connections when initiating a session.

> **⚠️ Critical Configuration**
> Do not set the connection limit to `1` for RDP targets. This will cause all RDP connections to fail. You must configure a limit of 2 or higher to account for the multiple connections used by the RDP client.

### Network configuration

RDP credential injection has specific network requirements:

- The standard RDP port is 3389 (configurable for non-standard ports).
- Port 127.0.0.1:3389 is blocked on Windows (use alternative addresses).
- UDP transport is disabled.
- Server redirection is not supported.
- The maximum TLS version is 1.2 (TLS 1.3 is incompatible with Windows Server 2025).

### Client behavior

Different RDP clients exhibit unique behaviors:

**Windows Remote Desktop Connection:**
- Does not prompt for credentials when Boundary injects them.

**macOS Microsoft Remote Desktop:**
- Prompts for credentials that are ignored (Boundary injects the stored credential regardless).
- Requires manual certificate acceptance per endpoint.

## Compatibility Status

### Compatibility Status Legend
* **✅:** Tested and verified to be compatible.
* **Pending:** Validation is planned but not yet complete.

### Windows Server 2025

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | Pending | ✅ | Pending |
| Windows 10 | ✅ | Pending | Pending |
| macOS 15 | Pending | Pending | Pending |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

### Windows Server 2022

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | ✅ | ✅ | ✅ |
| Windows 10 | ✅ | ✅ | ✅ |
| macOS 15 | Pending | ✅ | ✅ |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

### Windows Server 2019

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | ✅ | ✅ | ✅ |
| Windows 10 | ✅ | ✅ | ✅ |
| macOS 15 | ✅ | ✅ | ✅ |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

### Windows Server 2016

| Client OS | Kerberos only | Kerberos + NTLMv2 (domain-joined worker) | Kerberos + NTLMv2 (non-domain worker) |
|-----------|:-------------:|:----------------------------------------:|:--------------------------------------:|
| Windows 11 | Pending | ✅ | ✅ |
| Windows 10 | ✅ | ✅ | Pending |
| macOS 15 | ✅ | ✅ | ✅ |
| macOS 14 | Pending | Pending | Pending |
| macOS 13 | Pending | Pending | Pending |

## Quick Troubleshooting and FAQ

**Q: Why am I getting a certificate warning when I connect?**
A: This is expected behavior. Boundary generates a self-signed certificate for each RDP target. You must accept this certificate on your first connection.

**Q: My connection is failing immediately. What should I check first?**
A: Check the `connection limit` on your target. It cannot be set to `1`. Set it to 2 or higher.

**Q: Does this work with servers that require Entra ID login?**
A: No. At this time, only servers using traditional Kerberos or NTLMv2 authentication are supported.

**Q: The macOS RDP client is asking for a password. Is injection not working?**
A: This is a known behavior of the macOS client. You can leave the password field blank and proceed; Boundary will still inject the correct credentials in the background.
