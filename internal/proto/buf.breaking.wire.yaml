# Copyright IBM Corp. 2020, 2025
# SPDX-License-Identifier: BUSL-1.1

# This file defines the breaking change configuration we use for
# files for which we require only WIRE level compatibility checks,
# such as those used to describe the gRPC API between worker and controller.
version: v1
name: buf.build/hashicorp/boundary
deps:
  - buf.build/googleapis/googleapis
  - buf.build/grpc-ecosystem/grpc-gateway
breaking:
  use:
    - WIRE
  ignore_only:
    FIELD_NO_DELETE_UNLESS_NUMBER_RESERVED:
      # The proto files in controller/api are only exposed as json files so enforcing
      # proto backward compatability doesn't make sense, except for maybe the names.
      - controller/api
      # Storage protos are used by gorm.  Gorm relies on go tags and the json
      # names to determine what columns to update so we don't care of the field
      # numbers remain the same.
      - controller/storage
